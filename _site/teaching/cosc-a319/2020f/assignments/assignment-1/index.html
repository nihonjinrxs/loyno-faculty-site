<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Basic (Synchronous) JavaScript:<br />Ethernet Frame Data Parser &middot; Ryan Bensussan Harvey
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-KwxQKNj2D0XKEW5O/Y6haRH39PE/xry8SAoLbpbCMraqlX7kUP6KHOnrlrtvuJLR" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
  <link rel="stylesheet" href="/~rharvey/public/css/poole.css">
  <link rel="stylesheet" href="/~rharvey/public/css/syntax.css">
  <link rel="stylesheet" href="/~rharvey/public/css/lanyon.css">
  <link rel="stylesheet" href="/~rharvey/public/css/custom.css">

  <!-- favicon -->
  <link rel="apple-touch-icon" sizes="57x57" href="https://www.loyno.edu/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://www.loyno.edu/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://www.loyno.edu/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://www.loyno.edu/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://www.loyno.edu/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://www.loyno.edu/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://www.loyno.edu/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://www.loyno.edu/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://www.loyno.edu/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="https://www.loyno.edu/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://www.loyno.edu/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="https://www.loyno.edu/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://www.loyno.edu/favicon-16x16.png">
  <!-- link rel="manifest" href="./manifest.json" -->
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="https://www.loyno.edu/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-ryan sidebar-overlay">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" >

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Information about Ryan's teaching, research and computer science education work.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/~rharvey/">Home</a>

     
    
     
     
       
         
       
     
       
     
       
     
       
        
          <a  class="sidebar-nav-item" 
              href="/~rharvey/blog/">
            Blog
          </a>
         
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
    

    <p class="sidebar-nav-item sidebar-nav-heading">Teaching</p>
     
     
       
     
       
     
       
     
       
     
       
     
       
     
       
        
          <a  class="sidebar-nav-item level-2" 
              href="/~rharvey/teaching/cosc-a319/">
            <i class="fa fa-angle-right"></i>
            <p>COSC A319 Internet Technologies</p>
          </a>
         
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
     
       
        
          <a  class="sidebar-nav-item level-2" 
              href="/~rharvey/teaching/cosc-a451/">
            <i class="fa fa-angle-right"></i>
            <p>COSC A451 Software Engineering</p>
          </a>
         
       
     
       
     
       
     
       
     
       
     
       
     
       
    

    <div class="sidebar-nav-item sidebar-nav-heading">
      <a href="">
        <small>
          <i class="fa fa-code-fork"></i> Fork this site on GitHub
        </small>
      </a>
    </div>
    <span class="sidebar-nav-item">
      <small>
        Site v1.2.1, updated 10/05/2020
      </small>
    </span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2020 Ryan B. Harvey. All rights reserved.
    </p>
    <small>
      <p>
        The contents of this communication are the sole responsibility of Ryan B. Harvey and do not necessarily represent the opinions or policies of Loyola University New Orleans.
      </p>
    </small>
  </div>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/~rharvey/" title="Home">Ryan Bensussan Harvey</a>
            <small>Instructor in Computer Science <div class='social-icons'><a href='https://github.com/nihonjinrxs' target='_blank' alt='GitHub account'><i class='fa fa-github'> </i></a> <a href='https://twitter.com/CodeAndData' target='_blank' alt='Twitter account'><i class='fa fa-twitter'> </i></a> <a href='https://www.linkedin.com/in/ryanbharvey' target='_blank' alt='LinkedIn account'><i class='fa fa-linkedin-square'> </i></a> <a href='http://datascientist.guru' target='_blank' alt='Professional website of Ryan B. Harvey'><i class='fa fa-globe'> </i></a></div></small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="page">
  <a name="title" class='md-header-anchor'></a>
  <h1 class="page-title">
    
    
    <span class="page-subtitle">COSC A319 Internet Technologies (Fall 2020) - Assignment A1</span><br />
    
    
    Basic (Synchronous) JavaScript:<br />Ethernet Frame Data Parser
    
  </h1>
  <ul>
  <li><a href="#summary">Summary</a></li>
  <li><a href="#-schedule">üìÜ Schedule</a></li>
  <li><a href="#background">Background</a>
    <ul>
      <li><a href="#ethernet-packets-ethernet-frames-and-the-inter-packet-gap">Ethernet Packets, Ethernet Frames and the Inter-packet Gap</a></li>
      <li><a href="#mac-addresses">MAC Addresses</a></li>
      <li><a href="#ethernet-frame-formats">Ethernet Frame Formats</a>
        <ul>
          <li><a href="#dix-ethernet-ii">DIX Ethernet II</a></li>
          <li><a href="#ieee-8023">IEEE 802.3</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#your-assignment">Your Assignment</a>
    <ul>
      <li><a href="#expected-output">Expected Output</a></li>
      <li><a href="#program-structure">Program Structure</a>
        <ul>
          <li><a href="#a-note-on-working-with-binary-in-javascript">A note on working with binary in JavaScript</a></li>
        </ul>
      </li>
      <li><a href="#submission-and-feedback">Submission and Feedback</a></li>
    </ul>
  </li>
</ul>

<h2 id="summary">Summary</h2>

<p>In this assignment, you‚Äôll create and export a function that parses
an Ethernet frame, handling both the DIX Ethernet II and IEEE 802.3
formats.</p>

<p>Ethernet frame addressing, being a data link layer protocol, uses a
point-to-point addressing scheme called the media access control (MAC)
addressing, a hardware-based addressing scheme that assigns a unique
identifier to each network interface controller (NIC), usually available
burned into the NIC‚Äôs firmware.</p>

<h2 id="-schedule">üìÜ Schedule</h2>

<table>
  <tbody>
    <tr>
      <td>Assigned</td>
      <td>Tue, Sep 8, 2020</td>
    </tr>
    <tr>
      <td>Office hours</td>
      <td><a href="[https://](https://bit.ly/mr-harvey-office-hours)">By appointment</a></td>
    </tr>
    <tr>
      <td>Assignment Due</td>
      <td>Thu, Sep 10, 2020</td>
    </tr>
  </tbody>
</table>

<h2 id="background">Background</h2>

<h3 id="ethernet-packets-ethernet-frames-and-the-inter-packet-gap">Ethernet Packets, Ethernet Frames and the Inter-packet Gap</h3>

<p>Ethernet lives on layer 2 (Data Link) of the layered network model,
but is transmitted over layer 1 (Physical). On the Physical layer,
Ethernet packets are transmitted over transmission media separated
by an inter-packet gap of 12 bytes (octets). When designed, this gap
was intended to provide a delay between packets; now, however, a
12 byte gap provides minimal time delay, and acts simply as a separation
between packets. Because of this, in some cases, that gap is now reduced
to 8 bytes.</p>

<p>A new Ethernet packet is signified by a preamble of 7 bytes (octets) of
alternating 1s and 0s, followed by a 1-byte <em>start frame delimiter (SFD)</em>
<code class="language-plaintext highlighter-rouge">10101011</code>. In hexadecimal, this preamble and SFD sequence is
<code class="language-plaintext highlighter-rouge">AA AA AA AA AA AA AA AB</code>.</p>

<p>An Ethernet frame is the layer 2 routing portion of the packet, and begins
immediately after the SFD. Ethernet routing on the Data Link layer relies
on MAC addresses to identify devices.</p>

<h3 id="mac-addresses">MAC Addresses</h3>

<p>A MAC address is a 48-bit (6 byte) address assigned to a network
interface controller. The first 24 bits (3 bytes) are assigned
as an address block by the IEEE to manufacturers of NIC devices
for a fee. This portion is called the ‚ÄúOrganizationally Unique
Identifier‚Äù (OUI). The last 24 bits (3 bytes) are the manufacturer‚Äôs
unique serial number for the NIC device. (Some frame and packet
inspection programs will display the OUI portion as a company name
instead of using the 3-byte hexadecimal representation.)</p>

<p>An example MAC address might look like <code class="language-plaintext highlighter-rouge">00:0d:b7:1f:fe:e6</code>. In this
address, the OUI would be <code class="language-plaintext highlighter-rouge">00:0d:b7</code>, and since the NIC is an Intel
product, might be replaced with <code class="language-plaintext highlighter-rouge">Intel_</code> or similar by a frame
inspection program. The NIC‚Äôs serial number would be <code class="language-plaintext highlighter-rouge">1f:fe:e6</code>.</p>

<p>Note that MAC addresses are just a sequence of 48 bits in the machine.
However, when we write MAC addresses for human consumption, we separate
each byte‚Äôs hexadecimal representation by a colon character. This is to
make the addresses easier to interpret by explicitly showing the byte
boundaries.</p>

<h3 id="ethernet-frame-formats">Ethernet Frame Formats</h3>

<p>There are two commonly used Ethernet frame formats today, though these
are not the only Ethernet formats that have been used. In this assignment,
you will implement a parser for an Ethernet frame for each of these common
formats.</p>

<h4 id="dix-ethernet-ii">DIX Ethernet II</h4>

<p>A creation coming out of work from Digital Equipment Corporation,
Intel and Xerox in the early 1980‚Äôs DIX Ethernet, and its successor
DIX Ethernet II, quickly became a proprietary standard. Although
the hardware associated with it was outmoded by a newer, open standard
soon after, the frame format used was very popular, as it could hold
a few more bytes per frame than its competitor IEEE 802.3.</p>

<p>The frame structure of DIX Ethernet II involves a 14-byte frame header
and a 4-byte frame check sequence (FCS) trailer surrounding the frame‚Äôs data
payload, which can be up to 1500 bytes. The FCS is computed over all
previous fields of the frame, not including the packet preamble and SFD.</p>

<pre><code class="language-{text}">DIX Ethernet II Frame Structure
|----------header-----------|-----payload-. . .-------------|-trailer-|
------------------------------------------. . .------------------------
| ' ' ' ' ' | ' ' ' ' ' | ' | ' ' ' ' ' ' . . . ' ' ' ' ' ' | ' ' ' ' |
|  6 bytes  |  6 bytes  | 2B|       46 - 1500 bytes         | 4 bytes |
|  Dst MAC  |  Src MAC  |Type           Payload             |   FCS   |
|           |           |   |                               |         |
------------------------------------------. . .------------------------
</code></pre>

<h4 id="ieee-8023">IEEE 802.3</h4>

<p>IEEE‚Äôs 802.3 CSMA/CD frame structure took the DIX Ethernet II
structure and replaced the ‚ÄúEthertype‚Äù 2-byte field with an explicit
frame length value of 2 bytes. However, in order to include the frame
type information, they also added an 8-byte extension to the header
including the IEEE 802.2 ‚ÄúLogical Link Control‚Äù (LLC) header and the
‚ÄúSubnetwork Access Protocol‚Äù (SNAP) header extension. This 8 bytes had
to be carved from the payload data space in order to maintain the
1518 byte total capacity limit supported by most hardware at the time.</p>

<p>The extension header consists of 5 subfields:</p>

<ul>
  <li>LLC: Destination Service Access Point (DSAP) = <code class="language-plaintext highlighter-rouge">0xAA</code></li>
  <li>LLC: Source Service Access Point (SSAP) = <code class="language-plaintext highlighter-rouge">0xAA</code></li>
  <li>LLC: Control = <code class="language-plaintext highlighter-rouge">0x03</code></li>
  <li>SNAP: Organizationally Unique ID (from MAC, or unused = <code class="language-plaintext highlighter-rouge">0x000000</code>)</li>
  <li>SNAP: Type (protocol of the packet in the payload), for example:
    <ul>
      <li>IPv4 = <code class="language-plaintext highlighter-rouge">0x0800</code></li>
      <li>IPv6 = <code class="language-plaintext highlighter-rouge">0x08DD</code></li>
      <li>ARP = <code class="language-plaintext highlighter-rouge">0x0806</code></li>
    </ul>
  </li>
</ul>

<p>For IEEE 802.3, the 4-byte FCS is computed using all prior fields of the
frame, not including the packet preamble and SFD.</p>

<p>Although DIX Ethernet II frame structure is used for most IP packet traffic
on the Internet today, most other Ethernet-based network traffic usually
uses the IEEE 802.3 frame format.</p>

<pre><code class="language-{text}">IEEE 802.3 CSMA/CD LAN Frame Structure
|----------header---------------------------|-payload-. . .---------|-trailer-|
------------------------------------------------------. . .--------------------
| ' ' ' ' ' | ' ' ' ' ' | ' | ' ' ' ' ' ' ' | ' ' ' ' . . . ' ' ' ' | ' ' ' ' |
|  6 bytes  |  6 bytes  | 2B|    8 bytes    |   48 - 1492 bytes     | 4 bytes |
|  Dst MAC  |  Src MAC  |Len|    LLC/SNAP   |       Payload         |   FCS   |
|           |           |   |               |                       |         |
------------------------------------------------------. . .--------------------
                         __/                 \_________________________________
                        /                                                      \
                        ---------------------------------------------------------
                        |      |      |      |      '      '      |      '      |
                        |  1B  |  1B  |  1B  |      3 bytes       |   2 bytes   |
                        | DSAP | SSAP | Ctrl |        OUI         |    Type     |
                        |      |      |      |                    |             |
                        ---------------------------------------------------------
                        |-----802.2 LLC------|--------------SNAP----------------|
</code></pre>

<h2 id="your-assignment">Your Assignment</h2>

<p>To complete this assignment, you need to write the body of the <code class="language-plaintext highlighter-rouge">parse</code>
function defined and exported from <code class="language-plaintext highlighter-rouge">index.js</code>. You do not need to worry
about asynchronous operations yet ‚Äì just be able to parse the incoming
byte <code class="language-plaintext highlighter-rouge">Buffer</code> using the appropriate protocol.</p>

<h3 id="expected-output">Expected Output</h3>

<p>Your function should return a JavaScript object with the fields and
structure specified below. Expected data types and descriptions are
included in parentheses.</p>

<pre><code class="language-{text}">{
  protocol: (either "Ethernet II" or "IEEE 802.3"),
  header: {
    destinationMAC: (MAC address binary value as length 6 Buffer),
    destination: (MAC Address human-readable text string),
    sourceMAC: (MAC address binary value as length 6 Buffer),
    source: (MAC Address human-readable text string),
    type: (16-bit Unsigned integer value),
    length: (16-bit Unsigned integer value, number of payload bytes),
    llc: { // only include if relevant to protocol
      dsap: (Unsigned Integer),
      ssap: (Unsigned Integer),
      control: (Unsigned Integer)
    },
    snap_oui: (MAC OUI binary value as length 3 Buffer, if relevant to protocol)
  },
  payload: (payload data in binary format as an Buffer with appropriate length),
  frame_check: (Integer CRC-32 frame check sequence value),
  frame_check_valid: (Boolean, true if computed FCS matches)
}
</code></pre>

<h3 id="program-structure">Program Structure</h3>

<p>While you must make your implementation pass automated tests that
will only use the exported <code class="language-plaintext highlighter-rouge">parse</code> function, you will likely want
to create several additional functions to help with parsing the data.
Each of these functions should be well-tested (repeatably via automation),
so that you can be confident of the accuracy and error-free quality of
your parsing code. Each of these functions should also include relevant
documentation <a href="https://jsdoc.app/">in JSdoc format</a> about why they exist,
including expected inputs and outputs with data types.</p>

<p>In this repo, you will find a <code class="language-plaintext highlighter-rouge">lib</code> folder which contains several things
that should be helpful:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">parsers</code> folder - this is where you should put the protocol-specific
parser code you write</li>
  <li><code class="language-plaintext highlighter-rouge">framecheck.js</code> and <code class="language-plaintext highlighter-rouge">framecheck.test.js</code> - a module exporting a function
<code class="language-plaintext highlighter-rouge">framecheck</code> that computes the frame check sequence as a 32-bit unsigned
integer</li>
  <li><code class="language-plaintext highlighter-rouge">displayMAC.js</code> and <code class="language-plaintext highlighter-rouge">displayMAC.test.js</code> - a module exporting a function
<code class="language-plaintext highlighter-rouge">displayMAC</code> that formats a byte buffer as a human-readable MAC address</li>
</ul>

<h4 id="a-note-on-working-with-binary-in-javascript">A note on working with binary in JavaScript</h4>

<p>In this assignment (and in most of the rest of the course), you‚Äôll be
working with binary data in JavaScript. The interface for this work
will almost always be the <code class="language-plaintext highlighter-rouge">Buffer</code> class and its subclasses. Get to know
the <code class="language-plaintext highlighter-rouge">Buffer</code> class as soon as possible.</p>

<p>In particular, you‚Äôll need to be very familiar with the methods to read
various length unsigned integers, including the little endian (LE) and
big endian (BE) variants and how to choose which variant you need, and the
<code class="language-plaintext highlighter-rouge">subarray</code> method, as well as the typed subclasses of <code class="language-plaintext highlighter-rouge">Buffer</code>.</p>

<p>In some cases, you‚Äôll want to explicitly treat each byte separately, which
you can do by creating a <code class="language-plaintext highlighter-rouge">Uint8Array</code> from the <code class="language-plaintext highlighter-rouge">Buffer</code> by doing something
like:</p>

<pre><code class="language-{javascript}">Uint8Array.prototype.slice.call(this.buffer, startIndex, endIndex)
</code></pre>

<h3 id="submission-and-feedback">Submission and Feedback</h3>

<p>You must submit your changes as commits to a new branch on the repository
in the form of a Pull Request on Github. I will provide feedback in the
context of the Pull Request within a week of the due date of the assignment.
If you push your code earlier than the due date, I will try to provide
feedback as needed.</p>

<p>I suggest that you start by creating the new branch first, before doing any
work on the program, that you commit your changes to that branch, and that
you push your commits as you are working on the program. On the first push
to the new branch, please go ahead and create the Pull Request in Github.
This way, if you have questions, I will be able to review your
work-in-progress and give more relevant answers and feedback. I will do my
best to respond to questions posed during the course of the assignment with
in a day of the ask. <strong>If you want to ask a question or request early
feedback, please tag me in a comment on the Pull Request: <code class="language-plaintext highlighter-rouge">@nihonjinrxs</code>.</strong></p>

<p>Good luck, and I look forward to seeing what you create!</p>

</div>

      </div>
      
<hr>
<div class="container footer">
  Built with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> using
  the <a href="http://lanyon.getpoole.com/" target="_blank">Lanyon theme</a>.
</div>

    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
    <script src="https://use.fontawesome.com/263865d36b.js"></script>
  </body>
</html>
